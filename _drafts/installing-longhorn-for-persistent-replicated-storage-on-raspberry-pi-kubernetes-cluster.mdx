---
date: '2021-10-14'
title: 'Installing Longhorn for persistant replicated storage on raspberry pi kubernetes cluster'
category: technology
tags: ['raspberry', 'kubernetes', 'devops']
draft: true
---

https://longhorn.io/docs/0.8.1/what-is-longhorn/

First, install iscsi on all nodes that you want to use in the disk config

```
sudo apt install open-iscsi
```

persistence:

```
kubectl create namespace longhorn-system
helm install longhorn longhorn/longhorn --namespace longhorn-system
kubectl port-forward --namespace longhorn-system svc/longhorn-frontend :80
```

Then, label all nodes that you want to contribute to the storage schedule pool with the longhorn role

```
kubectl label node raspbravo node.longhorn.io/create-default-disk=true
```

as explained in the first blog of the series "[Kubernetes cluster build with Raspberry Pi nodes and PoE Hats in a DIN breaker box panel](kubernetes-cluster-build-with-raspberry-pi-and-poe-hats)
